# AGENTS

- 返答は簡潔な日本語で。不要な敬語や長文は避ける。
- 既存変更を壊さないこと。強制的な reset や不要なファイル削除は禁止。
- コード編集は可能な限り `apply_patch` を使い、小さな差分で示す。生成物の丸ごと貼り付けは避ける。
- 構成は `rusty-book-manager` に倣う。`src`/`kernel`/`adapter`/`api`/`registry`/`shared` に加え、`frontend/` も用意して UI から操作できるようにする。
- 基本検証コマンド: `cargo fmt` / `cargo clippy` / `cargo test`（将来 `cargo make` に集約）。実行できない場合は理由を明示。
- 外部ネットワークや追加ツール導入が必要な場合は事前に相談。Docker/compose 設定も段階的に追加する。
- バックエンドのAPIを実装するときはテスト駆動でやりたいので以下のように実施すること
  - docs/task.mdで実施するタスクを管理すること
  - 大まかな流れは以下の通り
    1. 実施するテストケースの認識合わせをする
    2. ユーザがテストケースを承認したらサブタスクのサブタスクとして列挙する
    3. 列挙が完了したらAIがテストを実装する
    4. 実装後、AIがユーザに対して必要な実装を列挙する（AIは実装はしない）
    5. AIが作成したテストに対してユーザが実装を行い、実装してOKになったら次のテストケースへ行く
  - CRUDは操作ごとにテストを分割し、順番は Adapter → API を基本とする
  - テストケースは日本語で記載する
  - テストは`api`と`adapter`それぞれで実装する。順番はどちらからでも良い。
  - テストの書き方は一貫性を保つため、既存のテストケースと同じように実装すること
